<%= form_block "Metadata" do %>
    <%= f.input :title %>
    <%= f.input :output_key, hint: "The key to deliver. Examples: kpcclive, podcast", input_html: { autocomplete: "off", data: { provide: "typeahead", source: PrerollCampaign.output_keys_select_collection }} %>
    <%= f.input :path_filter, label: "Context", hint: "This preroll will only be delievered if the requested context (ex. 'airtalk') matches this context." %>
<% end %>

<%= form_block("Master Audio File") do %>
    <% if @record.master_file.present? %>
        <strong>Current File:</strong> <%= @record.master_file.file.filename %>
        <h5>Replace Master File</h5>
    <% end %>

    <%= f.input :master_file, as: :file %>
<% end %>

<%= form_block "Scheduling" do %>
    <div class="alert alert-info">
        Empty scheduling fields will mark this campaign inactive.
    </div>

    <%= f.input :starts_at, include_blank: true %>
    <%= f.input :ends_at, include_blank: true %>
<% end %>

<%= form_block "Encodings" do %>
    <%= any_to_list? @record.encodings, message: "There are no encodings yet." do %>
      <table class="table table-striped">
        <thead>
          <tr>
            <th>Stream Key</th>
            <th>Created At</th>
            <th>File path</th>
          </tr>
        </thead>
        <tbody>
          <% @record.encodings.each do |encoding| %>
            <tr>
              <td><%= encoding.stream_key %></td>
              <td><%= display_datetime(encoding.created_at) %></td>
              <td><%= encoding.path %></td>
            </tr>
          <% end %>
        </tbody>
      </table>
    <% end %>
<% end %>

<br /><br /><br /><br /><br /><br />
